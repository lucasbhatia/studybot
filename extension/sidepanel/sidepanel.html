<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudyBot - Study Panel</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div id="app" class="sidepanel-container">
    <!-- Header -->
    <header class="sidepanel-header">
      <div class="header-content">
        <h1 id="setTitle">StudyBot</h1>
        <button id="extractBtn" class="icon-btn" title="Extract content">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
            <path d="M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8zm0 18c-3.35 0-6-2.57-6-6.1 0-2.73 1.73-5.66 6-9.25 4.27 3.59 6 6.52 6 9.25 0 3.53-2.65 6.1-6 6.1z"/>
          </svg>
        </button>
      </div>

      <!-- Tab Navigation -->
      <nav class="tabs">
        <button class="tab-btn active" data-tab="summary">
          <span class="tab-icon">üìù</span>
          <span>Summary</span>
        </button>
        <button class="tab-btn" data-tab="flashcards">
          <span class="tab-icon">üÉè</span>
          <span>Flashcards</span>
        </button>
        <button class="tab-btn" data-tab="quiz">
          <span class="tab-icon">üìã</span>
          <span>Quiz</span>
        </button>
      </nav>
    </header>

    <!-- Main Content Area -->
    <main class="sidepanel-content">
      <!-- Summary Tab -->
      <div id="summary-tab" class="tab-content active">
        <div class="summary-container">
          <div class="summary-controls">
            <label class="detail-level">
              <span>Detail Level:</span>
              <select id="detailLevel">
                <option value="brief">Brief</option>
                <option value="standard" selected>Standard</option>
                <option value="detailed">Detailed</option>
              </select>
            </label>
            <button id="copySummaryBtn" class="btn-icon" title="Copy to clipboard">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
              </svg>
            </button>
            <button id="editSummaryBtn" class="btn-icon" title="Edit">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"/>
                <path d="M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
              </svg>
            </button>
          </div>

          <div id="summaryContent" class="summary-text">
            <p class="placeholder">Extract content to generate a summary</p>
          </div>

          <div id="summaryEdit" class="summary-edit hidden">
            <textarea id="summaryEditText" placeholder="Edit summary..."></textarea>
            <div class="edit-actions">
              <button id="saveSummaryBtn" class="btn btn-sm btn-primary">Save</button>
              <button id="cancelSummaryBtn" class="btn btn-sm btn-secondary">Cancel</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Flashcards Tab -->
      <div id="flashcards-tab" class="tab-content">
        <div class="flashcards-container">
          <div class="cards-controls">
            <button id="prevCardBtn" class="btn btn-sm btn-secondary">‚Üê Prev</button>
            <span id="cardCounter" class="card-counter">0 / 0</span>
            <button id="nextCardBtn" class="btn btn-sm btn-secondary">Next ‚Üí</button>
            <button id="shuffleCardBtn" class="btn btn-sm btn-secondary">Shuffle</button>
          </div>

          <!-- Card Display -->
          <div id="cardDisplay" class="card-display">
            <div id="card" class="card hidden">
              <div class="card-inner">
                <div class="card-front">
                  <div id="cardQuestion" class="card-text question">Question</div>
                </div>
                <div class="card-back">
                  <div id="cardAnswer" class="card-text answer">Answer</div>
                </div>
              </div>
            </div>
            <div class="no-cards placeholder">
              No flashcards to study
            </div>
          </div>

          <!-- Card Status -->
          <div id="cardStatus" class="card-status hidden">
            <button id="markKnownBtn" class="btn btn-sm btn-success">‚úì Known</button>
            <button id="markLearningBtn" class="btn btn-sm btn-warning">‚úó Still Learning</button>
          </div>

          <!-- Card Actions -->
          <div id="cardActions" class="card-actions hidden">
            <button id="editCardBtn" class="btn btn-sm btn-secondary">Edit</button>
            <button id="deleteCardBtn" class="btn btn-sm btn-danger">Delete</button>
          </div>

          <!-- Add New Card -->
          <div class="add-card-section">
            <button id="addCardBtn" class="btn btn-sm btn-primary">+ Add Card</button>
          </div>

          <!-- Edit Card Form -->
          <div id="cardEditForm" class="card-form hidden">
            <input type="text" id="editCardQuestion" placeholder="Question..." class="form-input">
            <textarea id="editCardAnswer" placeholder="Answer..." class="form-textarea"></textarea>
            <div class="form-actions">
              <button id="saveCardBtn" class="btn btn-sm btn-primary">Save</button>
              <button id="cancelCardBtn" class="btn btn-sm btn-secondary">Cancel</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Quiz Tab -->
      <div id="quiz-tab" class="tab-content">
        <div class="quiz-container">
          <!-- Quiz Start Screen -->
          <div id="quizStart" class="quiz-screen">
            <div class="quiz-icon">üìã</div>
            <h3>Ready to Quiz?</h3>
            <p>Test your knowledge with generated questions</p>
            
            <div class="quiz-options">
              <label class="difficulty-option">
                <input type="radio" name="difficulty" value="easy" checked>
                <span>Easy</span>
              </label>
              <label class="difficulty-option">
                <input type="radio" name="difficulty" value="medium">
                <span>Medium</span>
              </label>
              <label class="difficulty-option">
                <input type="radio" name="difficulty" value="hard">
                <span>Hard</span>
              </label>
            </div>
            
            <button id="startQuizBtn" class="btn btn-primary">Start Quiz</button>
          </div>

          <!-- Quiz Question Screen -->
          <div id="quizQuestion" class="quiz-screen hidden">
            <div class="quiz-progress">
              <div id="progressBar" class="progress-bar"></div>
            </div>
            <div id="questionCounter" class="question-counter">1 / 10</div>

            <div id="questionText" class="question-text">Question text here</div>

            <div id="optionsContainer" class="options-container">
              <!-- Options generated dynamically -->
            </div>

            <button id="nextQuestionBtn" class="btn btn-primary" disabled>Next Question</button>
          </div>

          <!-- Quiz Results Screen -->
          <div id="quizResults" class="quiz-screen hidden">
            <div class="results-icon">üéâ</div>
            <h3 id="resultsTitle">Quiz Complete!</h3>
            
            <div class="results-score">
              <div class="score-value" id="scoreValue">0</div>
              <div class="score-label">out of 10</div>
            </div>

            <div id="resultsList" class="results-list">
              <!-- Results generated dynamically -->
            </div>

            <button id="retakeQuizBtn" class="btn btn-primary">Retake Quiz</button>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="sidepanel-footer">
      <button id="shareBtn" class="btn-icon-sm" title="Share">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
          <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.18c.52.47 1.2.77 1.96.77 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.48 9.31 6.84 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.84 0 1.48-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
        </svg>
      </button>
      <button id="exportBtn" class="btn-icon-sm" title="Export">
        <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
          <path d="M14 2H6c-1.1 0-1.99.9-1.99 2v16c0 1.1.89 2 1.99 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 15h-2v-2h2v2zm0-4h-2V9h2v4z"/>
        </svg>
      </button>
    </footer>
  </div>

  <script src="../lib/storage.js"></script>
  <script src="../lib/claude-api.js"></script>
  <script src="../lib/ai-generator.js"></script>
  <script src="../lib/share.js"></script>
  <script src="sidepanel.js"></script>
</body>
</html>
